<!DOCTYPE html> <html lang=en> <head> <link href="https://fonts.googleapis.com/css?family=Mukta|Poppins:500,600&display=swap" rel=stylesheet> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=client/main.3898572404.css rel=stylesheet><link href=client/[slug].3f331e1e.css rel=stylesheet><link href=client/client.e75a9efc.css rel=stylesheet><link href=client/Tag.2ddad0a9.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>üçøClassifying Shakespeare with Networks - Cameron Raymondüçø</title><link href=https://cameronraymond.me/blog/shakespeare-netlsd/ rel=canonical><meta content="What distinguishes Shakespeare's comedies from his tragedies? Without looking at a single line of dialogue, this article shows that it is possible to use networks to classify Shakespeare's plays. Posted on Towards Data Science." name=description><meta content="Cameron Raymond, University of Oxford, Oxford University, Data
    Science, Social Data Sience, Data Scientist" name=keywords><meta content=website property=og:type><meta content=https://cameronraymond.me/blog/shakespeare-netlsd/ property=og:url><meta content="üçøClassifying Shakespeare with Networks - Cameron Raymondüçø" property=og:title><meta content="What distinguishes Shakespeare's comedies from his tragedies? Without looking at a single line of dialogue, this article shows that it is possible to use networks to classify Shakespeare's plays. Posted on Towards Data Science." name=og:description><meta content=https://cameronraymond.me/networkd.png property=og:image><meta content=summary property=twitter:card><meta content=https://cameronraymond.me/blog/shakespeare-netlsd/ property=twitter:url><meta content="üçøClassifying Shakespeare with Networks - Cameron Raymondüçø" property=twitter:title><meta content="What distinguishes Shakespeare's comedies from his tragedies? Without looking at a single line of dialogue, this article shows that it is possible to use networks to classify Shakespeare's plays. Posted on Towards Data Science." property=twitter:description><meta content=https://cameronraymond.me/networkd.png property=twitter:image><noscript id=sapper-head-end></noscript> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-133541363-2"></script> <script> window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      gtag('js', new Date())

      gtag('config', 'UA-133541363-2') </script> </head> <body> <div id=sapper> <div class="svelte-ex3z1i margin"></div> <form action=https://tinyletter.com/cjkraymond class="svelte-ex3z1i sign-up-banner" method=post onsubmit="window.open('https://tinyletter.com/cjkraymond', 'popupwindow',
  'scrollbars=yes,width=800,height=600');return true" target=popupwindow><p><label class="svelte-ex3z1i label" for=tlemail>Let's be pals:</label></p> <div class=signup-input><input class="svelte-ex3z1i email" name=email id=tlemail placeholder=my@email.com></div> <input class=svelte-ex3z1i name=embed type=hidden value=1> <span class="svelte-ex3z1i tooltip"><input class="svelte-ex3z1i subscribe" type=submit value=‚úâÔ∏è> <span class="svelte-ex3z1i tooltiptext">Subscribe!</span></span> <span class=svelte-ex3z1i id=close-sub><svg class=svelte-c8tyih viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M331.3 308.7L278.6 256l52.7-52.7c6.2-6.2 6.2-16.4 0-22.6-6.2-6.2-16.4-6.2-22.6 0L256 233.4l-52.7-52.7c-6.2-6.2-15.6-7.1-22.6 0-7.1 7.1-6 16.6 0 22.6l52.7 52.7-52.7 52.7c-6.7 6.7-6.4 16.3 0 22.6 6.4 6.4 16.4 6.2 22.6 0l52.7-52.7 52.7 52.7c6.2 6.2 16.4 6.2 22.6 0 6.3-6.2 6.3-16.4 0-22.6z"></path> <path d="M256 76c48.1 0 93.3 18.7 127.3 52.7S436 207.9 436 256s-18.7 93.3-52.7 127.3S304.1 436 256 436c-48.1 0-93.3-18.7-127.3-52.7S76 304.1 76 256s18.7-93.3 52.7-127.3S207.9 76 256 76m0-28C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48z"></path></svg></span></form> <nav class=svelte-1otdzf2><a aria-label=Home href=. class=svelte-1otdzf2 rel=prefetch>Cameron Raymond </a> <div class="svelte-1otdzf2 links"><a aria-label=Resume href=cameron-raymond-resume.pdf class=svelte-1otdzf2 target=_blank><span class="svelte-1otdzf2 icon hideIcons"><svg class=svelte-c8tyih viewBox="0 0 576 512" xmlns=http://www.w3.org/2000/svg><path d="M552 64H88c-13.255 0-24 10.745-24 24v8H24c-13.255 0-24 10.745-24 24v272c0 30.928 25.072 56 56 56h472c26.51 0 48-21.49 48-48V88c0-13.255-10.745-24-24-24zM56 400a8 8 0 0 1-8-8V144h16v248a8 8 0 0 1-8 8zm236-16H140c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm208 0H348c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm-208-96H140c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm208 0H348c-6.627 0-12-5.373-12-12v-8c0-6.627 5.373-12 12-12h152c6.627 0 12 5.373 12 12v8c0 6.627-5.373 12-12 12zm0-96H140c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h360c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12z"></path></svg></span> <span class="svelte-1otdzf2 hideLinks">Resume</span></a> <a aria-label=Blog href=blog/ class=svelte-1otdzf2 rel=prefetch aria-current=page><span class="svelte-1otdzf2 icon hideIcons"><svg class=svelte-c8tyih viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"></path></svg></span> <span class="svelte-1otdzf2 hideLinks">Blog</span></a> <a aria-label=About href=about/ class=svelte-1otdzf2 rel=prefetch><span class="svelte-1otdzf2 icon hideIcons"><svg class=svelte-c8tyih viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"></path></svg></span> <span class="svelte-1otdzf2 hideLinks">About</span></a> <div class="svelte-1otdzf2 divider"></div> <a aria-label=LinkedIn href=https://www.linkedin.com/in/CJKRaymond/ class="svelte-1otdzf2 icon"><svg class=svelte-c8tyih viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a> <a aria-label=twitter href=https://twitter.com/CJKRaymond class="svelte-1otdzf2 icon"><svg class=svelte-c8tyih viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></div></nav> <main class=svelte-y41jpk> <div></div> </main> <div class="svelte-16irf4m chat"><div></div></div> <div class="svelte-16irf4m footer"><p class=svelte-16irf4m><span aria-hidden=false aria-label=Emoji role=img>üë®‚Äçüé®</span> + <span aria-hidden=false aria-label=Emoji role=img>üë∑‚Äç‚ôÇÔ∏è</span> by me <br> Last updated <a aria-label="April
      06, 21" href=https://www.onthisday.com/events/April/06>April 06, '21</a></p> <div class="svelte-16irf4m links"><a aria-label=LinkedIn href=https://www.linkedin.com/in/CJKRaymond/ class="svelte-16irf4m icon"><svg class=svelte-c8tyih viewBox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a> <div class="svelte-16irf4m divider"></div> <a aria-label=twitter href=https://twitter.com/CJKRaymond class="svelte-16irf4m icon"><svg class=svelte-c8tyih viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a> <div class="svelte-16irf4m divider"></div> <a aria-label=Github href=https://github.com/cameron-raymond/ class="svelte-16irf4m icon"><svg class=svelte-c8tyih viewBox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a> <div class="svelte-16irf4m divider"></div> <a aria-label=Medium href=https://medium.com/@cameronraymond/ class="svelte-16irf4m icon"><svg class=svelte-c8tyih viewBox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M71.5 142.3c.6-5.9-1.7-11.8-6.1-15.8L20.3 72.1V64h140.2l108.4 237.7L364.2 64h133.7v8.1l-38.6 37c-3.3 2.5-5 6.7-4.3 10.8v272c-.7 4.1 1 8.3 4.3 10.8l37.7 37v8.1H307.3v-8.1l39.1-37.9c3.8-3.8 3.8-5 3.8-10.8V171.2L241.5 447.1h-14.7L100.4 171.2v184.9c-1.1 7.8 1.5 15.6 7 21.2l50.8 61.6v8.1h-144v-8L65 377.3c5.4-5.6 7.9-13.5 6.5-21.2V142.3z"></path></svg></a></div></div> <a aria-label=" " href=blog/ class=svelte-1i4fw52>blog</a> <a aria-label=" " href=sitemap.xml class=svelte-1i4fw52>sitemap</a></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{post:{title:"Classifying Shakespeare with Networks",slug:"shakespeare-netlsd",emoji:"üçø",blurb:"What distinguishes Shakespeare's comedies from his tragedies? Without looking at a single line of dialogue, this article shows that it is possible to use networks to classify Shakespeare's plays. Posted on Towards Data Science.",type:"bp",tags:["gt"],link:"\u003Ca aria-label='Blog' href='https:\u002F\u002Fmedium.com\u002F@cameronraymond\u002Fclassifying-shakespeare-with-networks-2a6c1c44e17f'\u003EBlog\u003C\u002Fa\u003E",date:"Jun. 18, 2020",prod:true,html:"\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F2000\u002F1*uNiI3fHUS44j-QorVBxJUA.gif\" alt=\"All of Shakespeare‚Äôs plays, in network form\"\u003E\u003Cem\u003EAll of Shakespeare‚Äôs plays, in network form\u003C\u002Fem\u003E\n\u003Cp\u003EWilliam Shakespeare is one of our most recognizable and lauded playwrights. With a writing career that spans 36 (easily attributable) plays, an interesting aspect of his work is that these plays can be split up into well defined categories: comedies, tragedies, and histories. Comedies have happy endings and are uplifting, where the main characters overcome some obstacle. Tragedies generally end with the death of a flawed main character. However, \u003Cstrong\u003Ehow can we formalize the difference between comedies and tragedies?\u003C\u002Fstrong\u003E This is what we‚Äôll tackle in this article, but we won‚Äôt do it in the way you might expect.\u003C\u002Fp\u003E\u003Cp\u003EMy research (see: \u003Ca href=\"https:\u002F\u002Fcameronraymond.me\u002F\"\u003Ecameronraymond.me\u003C\u002Fa\u003E) focuses on networks and how the connections between us shape our world. While plenty of people have analyzed the dialogue of Shakespeare‚Äôs plays, far fewer have bothered to look at the differences in how characters relate to each other. Comedy‚Äôs and tragedies are very different ‚Äî  not just in terms of the dialogue used, but in how the characters and scenes are structured in relation to each other. \u003Cstrong\u003EI‚Äôm going to show that by only looking at the structure of a Shakespeare‚Äôs plays, and not looking at any of the dialogue, we can determine which plays are comedies and which are tragedies.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cp\u003EAdmittedly, this may seem odd at first. If you want to know a comedy from a tragedy, why wouldn‚Äôt you look at the actual dialogue?\u003C\u002Fp\u003E\u003Cp\u003EI would argue that \u003Cem\u003Enot\u003C\u002Fem\u003E \u003Cem\u003Erelying\u003C\u002Fem\u003E on language is an asset because while not everyone speaks the same language, \u003Cstrong\u003Emost stories are driven by  relationships between characters\u003C\u002Fstrong\u003E. A ‚Äúnetwork-first‚Äù approach gives us a more universal comparison of storytelling in a way that isn‚Äôt blocked by language barriers. Approaches that rely on natural language processing (NLP) need to know how to interpret different languages as well as different uses of the same language! An NLP model that learns from \u003Cem\u003EWest Side Story\u003C\u002Fem\u003E may have a hard time interpreting \u003Cem\u003ERomeo and Juliet\u003C\u002Fem\u003E, even though they‚Äôre both in English and follow identical story arcs. A network-first approach has the potential to pick up on the relational similarities between the two, despite the generational gap. Therefore, the aim is to test if the structure of Shakespeare‚Äôs comedies and tragedies are distinct enough to distinguish between the two, without relying on any understanding of language.\u003C\u002Fp\u003E\u003Ch2 id=\"the-data\"\u003EThe Data\u003C\u002Fh2\u003E\n\u003Cp\u003EThankfully, most of Shakespeare‚Äôs plays have been digitized. Using a \u003Ca href=\"https:\u002F\u002Fwww.kaggle.com\u002Fkingburrito666\u002Fshakespeare-plays\u002F\"\u003EKaggle data-set\u003C\u002Fa\u003E we can download all 36 plays and load their scripts into a dataframe. Since scripts contain stage directions, which don‚Äôt give information about how characters relate to one another, we‚Äôll drop those rows. Since we won‚Äôt be analyzing Shakespeare&#39;s histories we can also drop those.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Eimport pandas as pd\n\nplays_df = pd.read_csv(&quot;Shakespeare_data.csv&quot;)\n# Drop stage directions (where there isn&#39;t an act\u002Fscene\u002Fline)\nplays_df = plays_df[pd.notna(plays_df[&#39;ActSceneLine&#39;])]\nplays_df[[&#39;Act&#39;,&#39;Scene&#39;,&#39;Line&#39;]] = plays_df[&#39;ActSceneLine&#39;].str.split(&#39;.&#39;,expand= True).astype(float)\nplays_df = plays_df.drop(&#39;ActSceneLine&#39;,axis=1)\n\n# Drop Shakespeare&#39;s histories\nhistories = [&quot;King John&quot;, &quot;Henry Iv&quot;, &quot;Henry Vi Part 1&quot;, &quot;Henry V&quot;,\n            &quot;Henry Vi Part 2&quot;, &quot;Henry Vi Part 3&quot;, &quot;Henry Viii&quot;,\n            &quot;Richard Ii&quot;, &quot;Richard Iii&quot;]\nplays_df = plays_df[~plays_df[&quot;Play&quot;].isin(histories)]\n\nprint(&quot;{} rows and {} columns&quot;.format(*plays_df.shape))\nplays_df.head()\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F2000\u002F1*SUe3_PbkcZwIC1ihB8UTaw.png\" alt=\"\"\u003E\n\u003Cp\u003ENow that the data is in a usable format we can start building our networks (one for each play). Since we‚Äôre interested in how characters relate to each other we‚Äôll add a link, also called an edge, between two characters if they \u003Cem\u003Espeak in the same scene\u003C\u002Fem\u003E. Characters that speak together frequently are probably connected in some meaningful way. This will form the basis for our network-first classification model.\u003C\u002Fp\u003E\u003Cp\u003ELet‚Äôs use Shakespeare‚Äôs 1623 play \u003Cem\u003EAll‚Äôs Well That Ends Well\u003C\u002Fem\u003E as an example. First we‚Äôll isolate for that play‚Äôs dialogue. Then we‚Äôll  calculate how many times each character speaks, and keep those who meaningfully contribute to the structure of the play (those that speak more than 5 times).\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Eplay_name = &quot;Alls Well That Ends Well&quot;\n\nsingle_play = plays_df[(plays_df[&#39;Play&#39;] == play_name)]\n\n# Group the df by character to get how often each speak\ncharacters = single_play.groupby([&#39;Player&#39;]).size().reset_index()\ncharacters.rename(columns = {0: &#39;Count&#39;}, inplace = True)\n# Get top 20 characters\ncharacters = characters[characters[&quot;Count&quot;] &gt; 5]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENext we‚Äôll create the network. We can do this by going scene by scene and adding a link between two characters if they speak in the same scene. The more times those characters  speak together in different scenes, the stronger their link will be.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Efrom itertools import combinations\nfrom networkx import write_gpickle as write_g\nimport networkx as nx\n\nplay_graph = nx.Graph()\nplay_graph.add_nodes_from(top_characters[&quot;Player&quot;])\n\n# Group by Act\u002FScene and count how often each character spoke per scene \nscenes_df = single_play.groupby([&#39;Act&#39;,&#39;Scene&#39;,&#39;Player&#39;]).size()\nscenes_df = scenes_df[scenes_df[&quot;Player&quot;].isin(characters[&quot;Player&quot;])]\nscenes_df.rename(columns = {0: &#39;Count&#39;}, inplace = True)\n\n# Go scene by scene\nfor (act,scene), counts in scenes_df.groupby([&#39;Act&#39;,&#39;Scene&#39;]):\n    # Get all the characters that are in that scene\n    characters = counts[&quot;Player&quot;].tolist()\n    # If a scene contains characters [A,B,C] we want our graph to\n    # contain the edges [(A,B),(A,C),(B,C)]\n    pairs = list(combinations(characters,2))\n    for (a_char, b_char) in pairs:\n        if character_graph.has_edge(a_char, b_char):\n            play_graph[a_char][b_char][&#39;weight&#39;] += 1\n        else:\n            play_graph.add_edge(a_char, b_char,weight=1)\n\nwrite_g(play_graph, &quot;.\u002Fgraphs\u002F{}.gpickle&quot;.format(play_name))\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ERepeat for all  27 plays, visualize, and these are the resulting networks! Now we need a way to distinguish between comedies and tragedies that only uses these networks.\u003C\u002Fp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F2000\u002F1*uNiI3fHUS44j-QorVBxJUA.gif\" alt=\"\"\u003E\n\u003Ch2 id=\"how-to-compare-networks\"\u003EHow to Compare Networks\u003C\u002Fh2\u003E\n\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F3782\u002F1*mj4t4Qgu7NzJ7PMJbmeuaQ.png\" alt=\"The traditional way to compare networks.\"\u003E\u003Cem\u003EThe traditional way to compare networks.\u003C\u002Fem\u003E\n\u003Cp\u003ENow that we‚Äôve built networks for Shakespeare‚Äôs plays we need some way of distinguishing them. Unfortunately, there isn‚Äôt some straightforward way of comparing the structure of two networks. Traditionally, the most dominant method of comparison was called graph edit distance (GED). This method calculates how many edges would need to be reassigned between the two networks before they became identical. This is visualized in the image above. Unfortunately, this relies on each graph having the same number of nodes ‚Äî or else they‚Äôd never be identical. Since our plays have a varied number of characters, we‚Äôll need to turn to something else. \u003Cstrong\u003EGED is also relatively simple, and rarely captures the underlying structure of a network, so a more nuanced comparison method is needed.\u003C\u002Fstrong\u003E\u003C\u002Fp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F2652\u002F1*6RY31uhk5CKOw0Uw218LPg.png\" alt=\"Two graphs with similar structures despite different densities. [Source](https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=aiPOa1NTgvM).\"\u003E\u003Cem\u003ETwo graphs with similar structures despite different densities. \u003Ca href=\"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=aiPOa1NTgvM\"\u003ESource\u003C\u002Fa\u003E.\u003C\u002Fem\u003E\n\u003Cp\u003ETo solve this, we turn to a 2018 paper published in the \u003Cem\u003EInternational Conference on Knowledge Discovery &amp; Data Mining.\u003C\u002Fem\u003E These researchers define that two graphs are similar if information would flow through them in similar ways over time¬π. The resulting method is called a Network Laplacian Spectral Descriptor, or NetLSD for short. They‚Äôre assumption is that information flows through a network similar to how heat diffuses throughout your air ducts. If each node in your network gives off some of its ‚Äúheat‚Äù over time and passes it along the edges to its neighbors, then over time it will produce a signature that captures the network‚Äôs structure. So at each time step, all you have to do is sum up the amount of ‚Äúheat‚Äù in the network. This is represented by  \u003Cem\u003Eh(t)\u003C\u002Fem\u003E and is visualized as the y-axis in the image below. Since each heat trace signature uses the same number of time steps, it‚Äôs much easier to compare networks of different sizes. By using this technique they were able to identify between different types of proteins and enzymes with a high level of accuracy (94‚Äì95%)¬π.\u003C\u002Fp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F2478\u002F1*Ft99g3Ecrk6WPm1E76LQ1Q.png\" alt=\"NetLSD Heat signatures for two similar graphs: Source: Tsitsulin et al.\"\u003E\u003Cem\u003ENetLSD Heat signatures for two similar graphs: Source: Tsitsulin et al.\u003C\u002Fem\u003E\n\u003Cp\u003EWhile implementing NetLSD is relatively simple (especially if you use their \u003Ca href=\"https:\u002F\u002Fpypi.org\u002Fproject\u002FNetLSD\u002F\"\u003EPython\u003C\u002Fa\u003E package) it does requires some background knowledge in how computers represent networks and linear algebra. For those who are interested here‚Äôs the \u003Ca href=\"https:\u002F\u002Farxiv.org\u002Fabs\u002F1805.10712\"\u003Eoriginal paper\u003C\u002Fa\u003E. Since NetLSD‚Äôs inner workings aren‚Äôt crucial to our task of classifying comedies and  tragedies, I‚Äôll move along.\u003C\u002Fp\u003E\u003Ch2 id=\"putting-everything-together\"\u003EPutting Everything Together\u003C\u002Fh2\u003E\n\u003Cp\u003ENow that we have a way of comparing networks in a meaningful way we can classify different plays. First, we‚Äôll split the 27 plays up into two buckets: our training data, observed plays where we know the genre, and testing data, unknown plays that will be classified. We‚Äôll use our knowledge of the previously observed plays to help classify the unknown ones. Since there are so few plays, I‚Äôll reserve a third of the plays as testing data to validate the model.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Efrom sklearn.model_selection import train_test_split\nfrom numpy import concatenate as concat\n\ncom = [‚ÄúA Midsummer Nights Dream‚Äù, ‚ÄúA Comedy Of Errors‚Äù,\n        ‚ÄúTaming Of The Shrew‚Äù,‚ÄúTwo Gentlemen Of Verona‚Äù,\n        ‚ÄúLoves Labours Lost‚Äù, ‚ÄúThe Tempest‚Äù,‚ÄúA Winters Tale‚Äù,\n        ‚ÄúCymbeline‚Äù, ‚ÄúPericles‚Äù,‚ÄùAlls Well That Ends Well‚Äù,\n        ‚ÄúMeasure For Measure‚Äù, ‚ÄúTroilus And Cressida‚Äù,\n        ‚ÄúTwelfth Night‚Äù,‚ÄúAs You Like It‚Äù,\n        ‚ÄúMuch Ado About Nothing‚Äù, ‚ÄúMerchant Of Venice‚Äù,\n        ‚ÄúMerry Wives Of Windsor‚Äù]\n\ntrag = [‚ÄúMacbeth‚Äù,‚ÄùTitus Andronicus‚Äù, ‚ÄúRomeo And Juliet‚Äù,\n        ‚ÄúKing Lear‚Äù,‚ÄúHamlet‚Äù,‚ÄùOthello‚Äù, ‚ÄúJulius Caesar‚Äù,\n        ‚ÄúAntony And Cleopatra‚Äù, ‚ÄúCoriolanus‚Äù, ‚ÄúTimon Of Athens‚Äù]\n\ndata = np.array(com+trag)\n\n# Labels are what we&#39;re trying to predict (comedy or tragedy) \nlabels = concat([np.full(len(com), ‚Äúc‚Äù),np.full(len(trag), ‚Äút‚Äù)])\n\npriors, test_data, prior_labels, test_labels = train_test_split(data, labels, test_size=0.33)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ENext we‚Äôll take all of our training data, the plays where we know the genre, and calculate their heat trace signatures.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Eimport netlsd\nfrom networkx import read_gpickle as read_g \n\nargs = { &quot;timescales&quot;: np.logspace(-2, 2, 250), &quot;normalization&quot;: &quot;empty&quot; }\n\nget_sig = lambda title: netlsd.heat(read_g(&quot;.\u002Fgraphs\u002F{}.gpickle&quot;.format(title)),**args)\n\nprior_sigs =[get_sig(title) for title in priors]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ELet‚Äôs see if there‚Äôs a noticeable difference in how heat flows through a comedy vs a tragedy. It‚Äôs a little muddled, but it seems like tragedies retain more ‚Äúheat‚Äù than comedies on average. Using these signatures we can start classifying the unknown plays.\u003C\u002Fp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F2000\u002F1*M7p1MtnXtXb-nFcVhxnqUg.png\" alt=\"Heat signatures for the prior observed plays (aka ‚Äòtraining data‚Äô)\"\u003E\u003Cem\u003EHeat signatures for the prior observed plays (aka ‚Äòtraining data‚Äô)\u003C\u002Fem\u003E\n\u003Cp\u003EThe process for classifying a new play is relatively simple. We calculate the unobserved play‚Äôs heat trace signature, and then find the five prior observed plays with the closest heat trace signatures. If the majority of those five are comedies then we label that play as a comedy, otherwise we label it as a tragedy. This is what‚Äôs called a k-nearest neighbor (KNN) classifier. KNNs don‚Äôt really model anything per say ‚Äî which is why I prefer the term priors to training data ‚Äî but with so few plays to work with a KNN is a reasonable choice.\u003C\u002Fp\u003E\u003Cpre\u003E\u003Ccode class=\"language-python\"\u003Efrom netlsd import compare as l2_distance\n\ndef knn_predict(title, prior_sigs, prior_labels,k=5):\n    graph_sig = get_sig(title)\n    distances = [l2_distance(graph_sig,ps) for ps in prior_sigs]\n    total = pd.DataFrame({&quot;ptype&quot;: prior_labels, &quot;dist&quot;: distances})\n    total = total.sort_values(&quot;Distance From Input&quot;)\n    return total[&quot;ptype&quot;].head(k).mode()[0]\n\npred = [knn_predict(play,prior_sigs,prior_labels) for play in data_test]\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ESo how‚Äôd we do? Well, \u003Cstrong\u003Ewe were able to correctly classify 7 of the  9 plays in our testing data for a raw accuracy of 77.8%.\u003C\u002Fstrong\u003E The testing set contained 7 comedies and 2 tragedies, and we were able to \u003Cstrong\u003Ecorrectly classify all of the tragedies\u003C\u002Fstrong\u003E and \u003Cstrong\u003E5\u002F7 comedies\u003C\u002Fstrong\u003E. This shows that comedies and tragedies produce distinct enough structures that we can tell which is which by only looking at the networks.\u003C\u002Fp\u003E\u003Cimg src=\"https:\u002F\u002Fcdn-images-1.medium.com\u002Fmax\u002F2000\u002F1*LW_8KmcdOQtSUOVec9B9hQ.png\" alt=\"Comedy\u002Ftragedy classification confusion matrix.\"\u003E\u003Cem\u003EComedy\u002Ftragedy classification confusion matrix.\u003C\u002Fem\u003E\n\u003Ch2 id=\"so-what\"\u003ESo What?\u003C\u002Fh2\u003E\n\u003Cp\u003EWhile 27 plays is a small sample, I‚Äôd argue that the principles of this experiment are sound. \u003Cstrong\u003EA network first approach lets  us do something that, at first glance, seem pretty unlikely: we are able to figure out the genre of a play without looking at a single piece of dialogue.\u003C\u002Fstrong\u003E Personally, I  think that is pretty cool.\u003C\u002Fp\u003E\u003Cp\u003ESo are you saying this means we don‚Äôt care about NLP anymore?\u003C\u002Fp\u003E\u003Cp\u003EObviously not. There‚Äôs a ton of rich information in language that‚Äôs lost when something like a play is abstracted into a network. However, networks give researchers flexibility to not rely on, or be bound by, language. This goes back to the example of comparing plays in different languages or from different time periods. And the applications don‚Äôt stop at comparing plays or movies. Disinformation is often spread en-mass by creating networks of social media bots that retweet and amplify each others fake news to give the illusion of legitimacy. Rather than focusing on what an account is saying, it could be more helpful to see if it‚Äôs connection network is similar to networks of disinformation bots that have been taken down. \u003Cstrong\u003EThere are plenty of potential applications because networks are so malleable and can be used to represent almost anything.\u003C\u002Fstrong\u003E If you want to learn more about network science\u002Fgraph theory and it‚Äôs applications, check out my website below! It has links to all my work.\u003C\u002Fp\u003E\u003Cp\u003E[1]: Tsitsulin, Anton, Davide Mottin, Panagiotis Karras, Alexander Bronstein, and Emmanuel M√ºller. ‚ÄúNetlsd: hearing the shape of a graph.‚Äù In \u003Cem\u003EProceedings of the 24th ACM SIGKDD International Conference on Knowledge Discovery &amp; Data Mining\u003C\u002Fem\u003E, pp. 2347‚Äì2356. 2018.\u003C\u002Fp\u003E"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');(function(){try{eval("async function x(){}");var main="/client/client.e75a9efc.js"}catch(e){main="/client/legacy/client.e53be589.js"};var s=document.createElement("script");try{new Function("if(0)import('')")();s.src=main;s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main",main);}document.head.appendChild(s);}());</script> 